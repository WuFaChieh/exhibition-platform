<!DOCTYPE html>
<html lang="zh">
<head>
  <meta charset="UTF-8">
  <title>展覽資訊</title>
  <link rel="stylesheet" href="style.css">
  <style>
    /* 建議你加個簡單樣式 */
    #back-btn {
      position: fixed;
      top: 20px;
      left: 20px;
      padding: 8px 16px;
      font-size: 18px;
      border: 2px solid black;
      background: white;
      border-radius: 8px;
      cursor: pointer;
      z-index: 900;
    }

    #back-btn:hover {
      background: #ddd;
    }
  </style>
</head>
<body>

  <!-- 返回鍵 -->
  <button id="back-btn">← 返回</button>

  <div id="detail"></div>
  <script>
    // 返回上一頁
    document.getElementById("back-btn").addEventListener("click", () => {
      window.location.href = "index.html"; //回首頁
    });

    // 取得 URL 的 id 參數
    const urlParams = new URLSearchParams(window.location.search);
    const id = urlParams.get("id");

    fetch("exhibitions.json")
      .then(res => res.json())
      .then(data => {
        const item = data.find(e => e.id == id);

        const detail = document.getElementById("detail");

        if (!item) {
          detail.innerHTML = `
            <h1>找不到展覽資訊</h1>
          `;
          return;
        }

        detail.innerHTML = `
          <h1>${item.title}</h1>
          <img src="${item.image}" class="detail-img">
          <p><strong>日期：</strong>${item.date}</p>
          <p><strong>地點：</strong>${item.location}</p>
          <p><strong>分類：</strong>${item.category}</p>
          <p>${item.description}</p>
        `;
      });
  </script>

  <center>
  <div class="rating-box">
  <div class="rating-stars" id="avg-stars"></div>
    <div class="rating-info">
      ★★★★☆
      <span id="avg-score">4.3</span> / 5  
      （<span id="rating-count">128</span> 人）
    </div>
  </div>
  </center>

   <style>
    body { max-width: 600px; margin: 40px auto; }
    #comment-form { margin-bottom: 20px; }
    #comment-form textarea { width: 100%; height: 80px; }
    .comment { padding: 10px; background: #f5f5f5; margin-bottom: 10px; border-radius: 8px; white-space: pre-wrap; }
    .time { font-size: 12px; color: gray; margin-top: 4px; }
  </style>

  <h2>留言區</h2>

  <div id="comment-form">
    <textarea id="commentInput" placeholder="輸入留言..."></textarea>
    <button onclick="addComment()">送出</button>
  </div>

  <div id="commentList"></div>

  <script>
    function addComment() {
      const input = document.getElementById("commentInput");
      const text = input.value;
      if (!text.trim()) return;

      const list = document.getElementById("commentList");

      const wrapper = document.createElement("div");
      wrapper.className = "comment";

      const content = document.createElement("div");
      content.textContent = text;   // ⭐ 把內容當字串，不解析 HTML

      const time = document.createElement("div");
      time.className = "time";
      time.textContent = new Date().toLocaleString();

      wrapper.appendChild(content);
      wrapper.appendChild(time);

      list.prepend(wrapper);
      input.value = "";
    }
  </script>

</body>
</html>
